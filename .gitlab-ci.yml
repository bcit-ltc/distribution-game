image: node:10 

# variables:
#   TEST_URL: "https://test.ltc.bcit.ca"
#   PROD_URL: "https://ltc.bcit.ca"
#   WEB_ROOT: "/var/www/html"

cache:
  paths:
    - node_modules/ 

deploy_production:
  # only:
  #   refs:
  #     - master
  stage: deploy
  environment: Production
  script:
    - echo "Installing yarn"
    - npm install
    - echo "Building the application"
    - npm run build
    - echo "Getting into build folder"
    # - cd build/
    - ls -l
    - rsync -av --delete build/ /var/www/html/VSM/SOB/test
    #- lftp -e "open sftp://ltc.bcit.ca; user $FTP_USERNAME $FTP_PASSWORD; mirror -X .* -X .*/ --reverse --verbose build /html/VSM/SOB/test; bye"
